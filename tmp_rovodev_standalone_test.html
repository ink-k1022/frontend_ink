<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¨ç«‹æ»‘æ¡¿æ¸¬è©¦</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div style="padding: 40px; max-width: 400px; margin: 0 auto;">
        <h1>æ¬Šé‡æ»‘æ¡¿ç¨ç«‹æ¸¬è©¦</h1>
        
        <!-- è¤‡è£½è‡ª index.html çš„å¯¦éš›çµæ§‹ -->
        <div class="weight-control card">
            <h2 class="section-title">æ™ºèƒ½æ’åºè¨­å®š</h2>
            <div class="weight-description">
                èª¿æ•´è·é›¢èˆ‡è©•åƒ¹çš„é‡è¦æ€§ï¼Œæ‰¾åˆ°æœ€é©åˆæ‚¨çš„åº—å®¶
            </div>
            
            <div class="weight-slider-group">
                <div class="slider-container">
                    <label class="slider-label">
                        <span class="label-icon">ğŸ“</span>
                        è·é›¢æ¬Šé‡ (W<sub>d</sub>)
                        <span class="weight-value" id="distanceWeightValue">50%</span>
                    </label>
                    <input type="range" id="distanceWeight" min="0" max="100" value="50" class="slider">
                    <div class="slider-hint">æ•¸å€¼è¶Šé«˜ï¼Œè¶Šå„ªå…ˆé¡¯ç¤ºè¿‘çš„åº—å®¶</div>
                </div>
                
                <div class="slider-container">
                    <label class="slider-label">
                        <span class="label-icon">â­</span>
                        è©•åƒ¹æ¬Šé‡ (W<sub>r</sub>)
                        <span class="weight-value" id="ratingWeightValue">50%</span>
                    </label>
                    <input type="range" id="ratingWeight" min="0" max="100" value="50" class="slider">
                    <div class="slider-hint">æ•¸å€¼è¶Šé«˜ï¼Œè¶Šå„ªå…ˆé¡¯ç¤ºé«˜è©•åƒ¹åº—å®¶</div>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 20px; padding: 15px; background: #f0f0f0; border-radius: 8px;">
            <h3>é™¤éŒ¯è³‡è¨Šï¼š</h3>
            <div id="debugInfo" style="font-family: monospace; font-size: 14px;"></div>
        </div>
    </div>

    <!-- è¤‡è£½è‡ª app-refactored.js çš„ç›¸é—œé‚è¼¯ -->
    <script>
        console.log('=== ç¨ç«‹æ¸¬è©¦é–‹å§‹ ===');
        
        let currentWeights = {
            distance: 50,
            rating: 50
        };
        
        const distanceWeight = document.getElementById('distanceWeight');
        const ratingWeight = document.getElementById('ratingWeight');
        const debugInfo = document.getElementById('debugInfo');
        
        function updateWeightDisplays() {
            console.log('updateWeightDisplays() è¢«å‘¼å«, currentWeights:', currentWeights);
            
            const distElem = document.getElementById('distanceWeightValue');
            const rateElem = document.getElementById('ratingWeightValue');
            
            if (distElem && rateElem) {
                distElem.textContent = currentWeights.distance + '%';
                rateElem.textContent = currentWeights.rating + '%';
                
                debugInfo.innerHTML = `
                    âœ… æ›´æ–°æˆåŠŸ<br>
                    è·é›¢æ¬Šé‡: ${currentWeights.distance}%<br>
                    è©•åƒ¹æ¬Šé‡: ${currentWeights.rating}%<br>
                    ç¸½å’Œ: ${currentWeights.distance + currentWeights.rating}%<br>
                    æ™‚é–“: ${new Date().toLocaleTimeString()}<br>
                    <br>
                    DOM å…ƒç´ æª¢æŸ¥:<br>
                    - distanceWeightValue: ${distElem ? 'âœ“ å­˜åœ¨' : 'âœ— ä¸å­˜åœ¨'}<br>
                    - ratingWeightValue: ${rateElem ? 'âœ“ å­˜åœ¨' : 'âœ— ä¸å­˜åœ¨'}<br>
                    - distanceWeight slider: ${distanceWeight ? 'âœ“ å­˜åœ¨' : 'âœ— ä¸å­˜åœ¨'}<br>
                    - ratingWeight slider: ${ratingWeight ? 'âœ“ å­˜åœ¨' : 'âœ— ä¸å­˜åœ¨'}
                `;
                
                console.log('âœ“ é¡¯ç¤ºå·²æ›´æ–°');
            } else {
                console.error('âœ— æ‰¾ä¸åˆ°é¡¯ç¤ºå…ƒç´ ï¼');
                debugInfo.innerHTML = 'âŒ éŒ¯èª¤ï¼šæ‰¾ä¸åˆ°é¡¯ç¤ºå…ƒç´ ';
            }
        }
        
        // è·é›¢æ»‘æ¡¿äº‹ä»¶
        if (distanceWeight) {
            distanceWeight.addEventListener('input', function(e) {
                console.log('--- è·é›¢æ»‘æ¡¿ input äº‹ä»¶ ---');
                console.log('åŸå§‹å€¼:', e.target.value);
                
                currentWeights.distance = parseInt(e.target.value);
                currentWeights.rating = 100 - currentWeights.distance;
                ratingWeight.value = currentWeights.rating;
                
                console.log('è¨ˆç®—å¾Œ:', currentWeights);
                updateWeightDisplays();
            });
            console.log('âœ“ è·é›¢æ»‘æ¡¿äº‹ä»¶å·²ç¶å®š');
        } else {
            console.error('âœ— æ‰¾ä¸åˆ°è·é›¢æ»‘æ¡¿å…ƒç´ ');
        }
        
        // è©•åƒ¹æ»‘æ¡¿äº‹ä»¶
        if (ratingWeight) {
            ratingWeight.addEventListener('input', function(e) {
                console.log('--- è©•åƒ¹æ»‘æ¡¿ input äº‹ä»¶ ---');
                console.log('åŸå§‹å€¼:', e.target.value);
                
                currentWeights.rating = parseInt(e.target.value);
                currentWeights.distance = 100 - currentWeights.rating;
                distanceWeight.value = currentWeights.distance;
                
                console.log('è¨ˆç®—å¾Œ:', currentWeights);
                updateWeightDisplays();
            });
            console.log('âœ“ è©•åƒ¹æ»‘æ¡¿äº‹ä»¶å·²ç¶å®š');
        } else {
            console.error('âœ— æ‰¾ä¸åˆ°è©•åƒ¹æ»‘æ¡¿å…ƒç´ ');
        }
        
        // åˆå§‹åŒ–
        console.log('åŸ·è¡Œåˆå§‹åŒ–...');
        updateWeightDisplays();
        console.log('=== åˆå§‹åŒ–å®Œæˆï¼Œè«‹æ‹–å‹•æ»‘æ¡¿æ¸¬è©¦ ===');
    </script>
</body>
</html>
